$(function(e){var a={number:["01","02","03","04","05","06","07","08","09","10","11","12"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},t=new Date,r=t.getFullYear(),n=t.getMonth()+1;t.getDate();updateTheBirthDayValue=function(e,a,t,r,n){t*r*n!=0&&(r<10&&(r="0"+r),n<10&&(n="0"+n),hiddenDate=t+"-"+r+"-"+n,a.val(hiddenDate),e.callback&&e.callback(hiddenDate))},generateBirthdayPicker=function(t,l){var i=t.attr("id").replace(/-/g,""),o=e("<fieldset class='birthdayPicker'></fieldset>"),p=e("<select class='select30_per arrow_pos birthYear "+l.sizeClass+"' name='"+i+"_birth[year]'></select>"),d=e("<select class='select30_per birthMonth "+l.sizeClass+"' name='"+i+"_birth[month]'></select>"),s=e("<select class='select30_per birthDate "+l.sizeClass+"' name='"+i+"_birth[day]'></select>");$birthday=e("<input class='birthDay' name='"+i+"_birthDay' type='hidden'/>"),l.placeholder&&(e("<option value='0'>YYYY</option>").appendTo(p),e("<option value='0'>MM</option>").appendTo(d),e("<option value='0'>DD</option>").appendTo(s)),"bigEndian"==l.dateFormat?o.append(p).append(d).append(s):"littleEndian"==l.dateFormat?o.append(s).append(d).append(p):o.append(d).append(s).append(p);var c=r-l.minAge,h=r-l.maxAge;l.maxYear!=r&&l.maxYear>r&&(c=l.maxYear,h+=l.maxYear-r);for(var u=c;u>=h;u--)e("<option></option>").attr("value",u).text(u).appendTo(p);for(u=0;u<=11;u++)e("<option></option>").attr("value",u+1).text(a[l.monthFormat][u]).appendTo(d);for(u=1;u<=31;u++){var v=u<10?"0"+u:u;e("<option></option>").attr("value",u).text(v).appendTo(s)}if(o.append($birthday),t.append(o),l.defaultDate){var b=new Date(l.defaultDate);p.val(b.getFullYear()),d.val(b.getMonth()+1),s.val(b.getDate()),updateTheBirthDayValue(l,$birthday,b.getFullYear(),b.getMonth()+1,b.getDate())}o.on("change",function(){$birthday=e(this).find(".birthDay"),selectedYear=parseInt(p.val(),10),selectedMonth=parseInt(d.val(),10),selectedDay=parseInt(s.val(),10);var t=d.children(":last").val();if(selectedYear>r){if(t>n)for(;t>n;)d.children(":last").remove(),t--}else for(;t<12;)e("<option></option>").attr("value",parseInt(t)+1).text(a[l.monthFormat][t]).appendTo(d),t++;var i=s.children(":last").val(),o=new Date(selectedYear,selectedMonth,0).getDate();if(i>o)for(;i>o;)s.children(":last").remove(),i--;else if(i<o)for(;i<o;){var c=parseInt(i)+1,h=c<10?"0"+c:c;e("<option></option>").attr("value",c).text(h).appendTo(s),i++}updateTheBirthDayValue(l,$birthday,selectedYear,selectedMonth,selectedDay)})},e.fn.birthdayPicker=function(a){return this.each(function(){var t=e.extend(e.fn.birthdayPicker.defaults,a);generateBirthdayPicker(e(this),t)})},e.fn.birthdayPicker.defaults={maxAge:100,minAge:0,maxYear:r,dateFormat:"littleEndian",monthFormat:"number",placeholder:!0,defaultDate:!1,sizeClass:"span2",callback:!1}}(jQuery));